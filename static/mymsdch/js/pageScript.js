var clickHandler="click";if("ontouchstart" in document.documentElement){clickHandler="touchstart";}$(document).ready(function(){setTimeout(function(){setFooter();},10);setTimeout(function(){favicon();},100);topNavSearchPopup();generalDisclaimer();contactusPopup();footerContactus();mobileTopNav();});function royalSliderInitialize(){$("#banner-rotator-mini973107").royalSlider({slideshowEnabled:true,slideshowDelay:5000,slideshowPauseOnHover:true,slideshowAutoStart:true,imageAlignCenter:true,imageScaleMode:"fill",hideArrowOnLastSlide:true,autoScaleSlider:true,autoScaleSliderWidth:567,autoScaleSliderHeight:240,slideTransitionType:"move",slideTransitionSpeed:600,controlNavEnabled:true,slideSpacing:0});$(".royalWrapper .banner").css("display","block");}function contactusPopup(){var b=window.location.href;var c=b.split("/")[2];var a=window.location.origin;$(".contact_button, #contact_iframe_mobile").on("click",function(){if(window.location.href.indexOf("/fr/")>-1){if(c=="mymsd-ch-dev.epublishmerck.com"){$(".contact_us_iframe").children("iframe").attr("src","https://mymsd-ch-dev.epublishmerck.com/fr/contact-us.xhtml");}else{if(c=="www.mymsd.ch"){$(".contact_us_iframe").children("iframe").attr("src","https://www.mymsd.ch/fr/contact-us.xhtml");}}}else{if(window.location.href.indexOf("/de/")>-1){if(c=="mymsd-ch-dev.epublishmerck.com"){$(".contact_us_iframe").children("iframe").attr("src","https://mymsd-ch-dev.epublishmerck.com/de/contact-us.xhtml");}else{if(c=="www.mymsd.ch"){$(".contact_us_iframe").children("iframe").attr("src","https://www.mymsd.ch/de/contact-us.xhtml");}}}else{$(".iframr_conatiner iframe").attr("src","contact-us.xhtml");}}$(this).addClass("active");$(".iframr_conatiner").show();});$(".contact_close").on("click",function(){$(".contact_button").removeClass("active");$(".iframr_conatiner").hide();});}function mobileTopNav(){var a=getDocWidth();if(a<1024){$(".mobileBackBtn").on("click",function(){$(".subnode").hide();});}if(a>767){$("#nav_bar_ul ul.subnode").css("display","");}}function footerContactus(){var b=window.location.href;var c=b.split("/")[2];var a=window.location.origin;$("#footer .footer li a").each(function(){console.log($(this).text());if(!$.isEmptyObject(epublish.foundation.userData)){if($(this).text()=="Kontakt"){$(this).on("click",function(d){d.preventDefault();if($(".iframr_conatiner").css("display")=="none"){if(window.location.href.indexOf("/de/")>-1){if(c=="mymsd-ch-dev.epublishmerck.com"){$(".contact_us_iframe").children("iframe").attr("src","https://mymsd-ch-dev.epublishmerck.com/de/contact-us.xhtml");}else{if(c=="www.mymsd.ch"){$(".contact_us_iframe").children("iframe").attr("src","https://www.mymsd.ch/de/contact-us.xhtml");}}}else{$(".iframr_conatiner iframe").attr("src","contact-us.xhtml");}$(".contact_button").addClass("active");$(".iframr_conatiner").show();}});}else{if($(this).text()=="Contact"){$(this).on("click",function(d){d.preventDefault();if($(".iframr_conatiner").css("display")=="none"){if(window.location.href.indexOf("/fr/")>-1){if(c=="mymsd-ch-dev.epublishmerck.com"){$(".contact_us_iframe").children("iframe").attr("src","https://mymsd-ch-dev.epublishmerck.com/fr/contact-us.xhtml");}else{if(c=="www.mymsd.ch"){$(".contact_us_iframe").children("iframe").attr("src","https://www.mymsd.ch/fr/contact-us.xhtml");}}}else{$(".iframr_conatiner iframe").attr("src","contact-us.xhtml");}$(".contact_button").addClass("active");$(".iframr_conatiner").show();}});}}}else{if($(this).text()=="Kontakt"){$(this).attr("href","https://www.msd.ch/de/contact/");}else{if($(this).text()=="Contact"){$(this).attr("href","https://www.msd.ch/fr/contact/");}}}});}function loginPopShow(){$("#loginPop").on("click",function(){sessionStorage.setItem("pop","true");window.location.href="/index.xhtml";});if(window.location.href.match(/mci-se-dev.epublishmerck.com\/index.xhtml/)!=null||window.location.pathname.match(/\/$/)!=null){if(sessionStorage.getItem("pop")!=null||sessionStorage.getItem("pop")!=undefined){$(".login_popup").css("display","block");}}}function userSession(){if(typeof epublish.foundation=="undefined"){console.log("object not loaded");setTimeout(userSession,100);}else{console.log("object loaded");if($.isEmptyObject(epublish.foundation.userData)){console.log("logged out");}else{if(epublish.foundation.userData.VerificationStatus!=null&&epublish.foundation.userData.VerificationStatus!="pending"&&epublish.foundation.userData.VerificationStatus!="rejected"){console.log("logged in");if(epublish.foundation.userData.autoLoggedIn==="true"&&(window.location.href.match(/mci-in-dev.epublishmerck.com\/index.xhtml/)!=null||window.location.href.match(/mci-in-dev.epublishmerck.com\/login.xhtml/)!=null||window.location.href.match(/mci-in-dev.epublishmerck.com\/registration.xhtml/)!=null||window.location.pathname.match(/\/$/)!=null)){var b='<li class="QC_Item"><strong class="user_name">&#160;</strong></li><li class="QC_Item last"><a title="Log ind" href="/index.xhtml">Log ind</a></li><li class="QC_Item"><a title="Register" href="/registration.xhtml?screenToRender=traditionalRegistration">Register</a></li>';var c='<li><a title="Register" href="/registration.xhtml?screenToRender=traditionalRegistration">Register</a></li><li><a title="Log ind" href="/index.xhtml">Log ind</a></li>';var a="/index.xhtml";$("ul#UserProfile").html(b);$("ul#UserProfile").addClass("preloguser");$("ul#UserProfileMobile ul.QC_Item_Open").html(c);$("#msd_link").attr("href",a);}else{if(window.location.href.match(/mci-in-dev.epublishmerck.com\/index.xhtml/)!=null||window.location.href.match(/mci-in-dev.epublishmerck.com\/login.xhtml/)!=null||window.location.href.match(/mci-in-dev.epublishmerck.com\/registration.xhtml/)!=null||window.location.pathname.match(/\/$/)!=null){window.location.href="/home.xhtml";}}document.cookie="redirectPage=false; path=/";}}}}function favicon(){var a="/static/mymsdch/images/favicon.ico";$("head").prepend('<link rel="shortcut icon" href="'+a+'" type="image/x-icon" />');}function userLogout(){$("li #captureSignOutLink").on(clickHandler,function(){var d=localStorage.length;var c=[];for(var a=0;a<d;a++){if(localStorage.key(a).indexOf("uname")<0){c.push(localStorage.key(a));}}for(var b=0;b<c.length;b++){localStorage.removeItem(c[b]);}});}function topNavSearchPopup(){if(!($.isEmptyObject(epublish.foundation.userData))){if(window.location.href.indexOf("/fr/")>-1){$("#btnSearch, #basic_search_fr").on("click",function(a){a.preventDefault();$(".search_popup_fr").show();});}else{if(window.location.href.indexOf("/de/")>-1){$("#btnSearch, #basic_search_de").on("click",function(a){a.preventDefault();$(".search_popup_de").show();});}}}$(".close_green").on("click",function(){$(".search_popup").hide();});}function loginHeader(){if(!$.isEmptyObject(epublish.foundation.userData)&&(epublish.foundation.userData.VerificationStatus!=null&&epublish.foundation.userData.VerificationStatus!="pending"&&epublish.foundation.userData.VerificationStatus!="rejected")){document.getElementById("logged_user_name").innerHTML=epublish.foundation.userData.firstName+" "+epublish.foundation.userData.lastName;$("ul#UserProfile").removeClass("preloguser");}else{var b='<li class="QC_Item"><strong class="user_name">&#160;</strong></li><li class="QC_Item last"><a title="Log ind" href="#" id="loginPop">Log ind</a></li><li class="QC_Item"><a title="Tilmeld dig" href="/registration.xhtml?screenToRender=traditionalRegistration">Tilmeld dig</a></li>';var c='<li><a title="Tilmeld dig" href="/registration.xhtml?screenToRender=traditionalRegistration">Tilmeld dig</a></li><li><a title="Log ind" href="#" id="loginPop">Log ind</a></li>';var a="/index.xhtml";$("ul#UserProfile").html(b);$("ul#UserProfile").addClass("preloguser");$("ul#UserProfileMobile ul.QC_Item_Open").html(c);$("#msd_link").attr("href",a);}}function setFooter(){$("#footer").prependTo("#bottom");}function generalDisclaimer(){if(!$.isEmptyObject(epublish.foundation.userData)){if(epublish.foundation.userData.autoLoggedIn=="true"){document.cookie="disclaimer-status=disclaimer-seen; path=/;";$(".disclaimer-div_de").hide();$(".disclaimer-div_fr").hide();}}if(document.cookie.indexOf("disclaimer-seen")<0&&window.location.href.indexOf("imtoken")<=-1){if(window.location.href.indexOf("/fr/")>-1){if(!(window.location.href.indexOf("/terms-of-agreement")>-1||window.location.href.indexOf("/privacy-policy")>-1)){$(".disclaimer-div_fr").show();}$(".disclaimer-div_de").hide();}else{if(window.location.href.indexOf("/de/")>-1){if(!(window.location.href.indexOf("/terms-of-agreement")>-1||window.location.href.indexOf("/privacy-policy")>-1)){$(".disclaimer-div_de").show();}$(".disclaimer-div_fr").hide();}}}$(".disclaimer-div_fr #professional,.disclaimer-div_de #professional").on("click",function(){document.cookie="disclaimer-status=disclaimer-seen; path=/;";$(".disclaimer-div_de").hide();$(".disclaimer-div_fr").hide();});}function getCookie(c){var f=c+"=";var d=decodeURIComponent(document.cookie);var b=d.split(";");for(var e=0;e<b.length;e++){var a=b[e];while(a.charAt(0)==" "){a=a.substring(1);}if(a.indexOf(f)==0){return a.substring(f.length,a.length);}}return"";}